"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/suggest/route";
exports.ids = ["app/api/suggest/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggest%2Froute&page=%2Fapi%2Fsuggest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggest%2Froute.ts&appDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggest%2Froute&page=%2Fapi%2Fsuggest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggest%2Froute.ts&appDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_jr_Projetos_MestrAi_app_api_suggest_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/suggest/route.ts */ \"(rsc)/./app/api/suggest/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/suggest/route\",\n        pathname: \"/api/suggest\",\n        filename: \"route\",\n        bundlePath: \"app/api/suggest/route\"\n    },\n    resolvedPagePath: \"/home/jr/Projetos/MestrAi/app/api/suggest/route.ts\",\n    nextConfigOutput,\n    userland: _home_jr_Projetos_MestrAi_app_api_suggest_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/suggest/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzdWdnZXN0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZzdWdnZXN0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGc3VnZ2VzdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGanIlMkZQcm9qZXRvcyUyRk1lc3RyQWklMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRmhvbWUlMkZqciUyRlByb2pldG9zJTJGTWVzdHJBaSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDRTtBQUMvRTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RyYWktLS12aXJ0dWFsLXRhYmxldG9wLz9hNDBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9ob21lL2pyL1Byb2pldG9zL01lc3RyQWkvYXBwL2FwaS9zdWdnZXN0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9zdWdnZXN0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc3VnZ2VzdFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3VnZ2VzdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2pyL1Byb2pldG9zL01lc3RyQWkvYXBwL2FwaS9zdWdnZXN0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9zdWdnZXN0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggest%2Froute&page=%2Fapi%2Fsuggest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggest%2Froute.ts&appDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/suggest/route.ts":
/*!**********************************!*\
  !*** ./app/api/suggest/route.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var groq_sdk__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! groq-sdk */ \"(rsc)/./node_modules/groq-sdk/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var _lib_ai_keyPool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/ai/keyPool */ \"(rsc)/./lib/ai/keyPool.ts\");\n/* harmony import */ var _lib_ai_rateLimit__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/ai/rateLimit */ \"(rsc)/./lib/ai/rateLimit.ts\");\n/* harmony import */ var _lib_ai_modelPool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/ai/modelPool */ \"(rsc)/./lib/ai/modelPool.ts\");\n\n\n\n\n\n\nconst bodySchema = zod__WEBPACK_IMPORTED_MODULE_4__.object({\n    type: zod__WEBPACK_IMPORTED_MODULE_4__.string(),\n    payload: zod__WEBPACK_IMPORTED_MODULE_4__.record(zod__WEBPACK_IMPORTED_MODULE_4__.any()).optional()\n});\nfunction buildPrompt(type, payload = {}) {\n    switch(type){\n        case \"suggestTitle\":\n            return `Suggest a creative, catchy, and unique RPG campaign title for a game using the '${payload.system}' system. Language: Portuguese. Return ONLY the title, no quotes.`;\n        case \"suggestGenre\":\n            return payload.title && payload.title.length > 3 ? `Based on the RPG campaign title \"${payload.title}\", suggest 1 to 3 suitable sub-genres/themes separated by commas. Language: Portuguese. Return ONLY the genres.` : `Suggest a creative RPG sub-genre based on 'Dark Fantasy' but make it unique (max 4 words). Return ONLY the genre name.`;\n        case \"suggestWorldHistory\":\n            return `Create a short, engaging World History premise (max 3 sentences) specifically for a campaign using the '${payload.system}' system in the '${payload.genre}' genre. Ensure the tone matches the system mechanics. Language: Portuguese.`;\n        case \"suggestStyle\":\n            return `Based on the World History and Genre below, suggest a concise 'visual_style' for an AI image generator (Stable Diffusion/Flux style). Genre: ${payload.genre}. System: ${payload.system}. World History: \"${payload.worldHistory}\". Response ONLY with the prompt string (e.g., \"Dark Fantasy, Oil Painting, Gritty, High Contrast\").`;\n        case \"suggestCharacterName\":\n            return `Suggest a cool, unique character name fitting for a ${payload.genre} RPG setting using the ${payload.system} system. Return ONLY the name.`;\n        case \"suggestCharacterAppearance\":\n            return `Describe the physical appearance of a RPG character named \"${payload.name}\" in a ${payload.genre} setting. concise, visual, max 2 sentences. Language: Portuguese.`;\n        case \"suggestCharacterBackstory\":\n            {\n                const appearance = (payload.appearance || \"\").toString().trim();\n                const profession = (payload.profession || \"\").toString().trim();\n                const appearanceHint = appearance ? `Appearance: ${appearance}. ` : \"\";\n                const professionHint = profession ? `Profession/Occupation: ${profession}. ` : \"\";\n                return `Write a short backstory (3 sentences) for a character named ${payload.name}. ${appearanceHint}${professionHint}World Context: ${payload.worldHistory}. Language: Portuguese.`;\n            }\n        case \"suggestCharacterProfession\":\n            {\n                const appearance = (payload.appearance || \"\").toString().trim();\n                const backstory = (payload.backstory || \"\").toString().trim();\n                const hints = [\n                    appearance ? `Aparência: ${appearance}` : \"\",\n                    backstory ? `Background: ${backstory}` : \"\"\n                ].filter(Boolean).join(\" | \");\n                const prefix = hints ? `${hints}. ` : \"\";\n                return `Sugira uma profissão/ocupação curta (1 a 3 palavras) para o personagem. ${prefix}Retorne APENAS a profissão/ocupação.`;\n            }\n        default:\n            return null;\n    }\n}\nasync function POST(req) {\n    try {\n        const json = await req.json();\n        const parsed = bodySchema.safeParse(json);\n        if (!parsed.success) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid payload\"\n            }, {\n                status: 400\n            });\n        }\n        const prompt = buildPrompt(parsed.data.type, parsed.data.payload || {});\n        if (!prompt) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid type\"\n            }, {\n                status: 400\n            });\n        }\n        const userKey = req.headers.get(\"x-custom-api-key\") || undefined;\n        const ip = (req.headers.get(\"x-forwarded-for\") || \"unknown\").split(\",\")[0].trim();\n        const rateKey = `suggest:${ip}`;\n        if (await (0,_lib_ai_rateLimit__WEBPACK_IMPORTED_MODULE_2__.isRateLimited)(rateKey)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Rate limit exceeded\"\n            }, {\n                status: 429\n            });\n        }\n        let apiKey;\n        try {\n            apiKey = (0,_lib_ai_keyPool__WEBPACK_IMPORTED_MODULE_1__.pickApiKey)(userKey);\n        } catch  {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing API key\"\n            }, {\n                status: 401\n            });\n        }\n        const ai = new groq_sdk__WEBPACK_IMPORTED_MODULE_5__[\"default\"]({\n            apiKey\n        });\n        const result = await (0,_lib_ai_modelPool__WEBPACK_IMPORTED_MODULE_3__.withModelFallback)((model)=>ai.chat.completions.create({\n                model,\n                messages: [\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.7\n            }), {\n            key: `suggest:${parsed.data.type}`\n        });\n        const text = result.choices?.[0]?.message?.content || \"\";\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            text\n        });\n    } catch (error) {\n        console.error(\"Suggest API error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxNQUFNLENBQUM7Z0JBQ3pCSDtnQkFDQUksVUFBVTtvQkFBQzt3QkFBRUMsTUFBTTt3QkFBUUMsU0FBU2xCO29CQUFPO2lCQUFFO2dCQUM3Q21CLGFBQWE7WUFDZixJQUNGO1lBQUVDLEtBQUssQ0FBQyxRQUFRLEVBQUV6QixPQUFPTSxJQUFJLENBQUNsQyxJQUFJLENBQUMsQ0FBQztRQUFDO1FBR3ZDLE1BQU1zRCxPQUFPVixPQUFPVyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUVDLFNBQVNMLFdBQVc7UUFDdEQsT0FBTzNELHFEQUFZQSxDQUFDbUMsSUFBSSxDQUFDO1lBQUUyQjtRQUFLO0lBQ2xDLEVBQUUsT0FBT3ZCLE9BQU87UUFDZDBCLFFBQVExQixLQUFLLENBQUMsc0JBQXNCQTtRQUNwQyxPQUFPdkMscURBQVlBLENBQUNtQyxJQUFJLENBQUM7WUFBRUksT0FBTztRQUFlLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQ3BFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0cmFpLS0tdmlydHVhbC10YWJsZXRvcC8uL2FwcC9hcGkvc3VnZ2VzdC9yb3V0ZS50cz8zYThmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCBHcm9xIGZyb20gJ2dyb3Etc2RrJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgcGlja0FwaUtleSB9IGZyb20gJy4uLy4uLy4uL2xpYi9haS9rZXlQb29sJztcbmltcG9ydCB7IGlzUmF0ZUxpbWl0ZWQgfSBmcm9tICcuLi8uLi8uLi9saWIvYWkvcmF0ZUxpbWl0JztcbmltcG9ydCB7IHdpdGhNb2RlbEZhbGxiYWNrIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FpL21vZGVsUG9vbCc7XG5cbmNvbnN0IGJvZHlTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHR5cGU6IHouc3RyaW5nKCksXG4gIHBheWxvYWQ6IHoucmVjb3JkKHouYW55KCkpLm9wdGlvbmFsKCksXG59KTtcblxuZnVuY3Rpb24gYnVpbGRQcm9tcHQodHlwZTogc3RyaW5nLCBwYXlsb2FkOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge30pIHtcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnc3VnZ2VzdFRpdGxlJzpcbiAgICAgIHJldHVybiBgU3VnZ2VzdCBhIGNyZWF0aXZlLCBjYXRjaHksIGFuZCB1bmlxdWUgUlBHIGNhbXBhaWduIHRpdGxlIGZvciBhIGdhbWUgdXNpbmcgdGhlICcke3BheWxvYWQuc3lzdGVtfScgc3lzdGVtLiBMYW5ndWFnZTogUG9ydHVndWVzZS4gUmV0dXJuIE9OTFkgdGhlIHRpdGxlLCBubyBxdW90ZXMuYDtcbiAgICBjYXNlICdzdWdnZXN0R2VucmUnOlxuICAgICAgcmV0dXJuIHBheWxvYWQudGl0bGUgJiYgcGF5bG9hZC50aXRsZS5sZW5ndGggPiAzXG4gICAgICAgID8gYEJhc2VkIG9uIHRoZSBSUEcgY2FtcGFpZ24gdGl0bGUgXCIke3BheWxvYWQudGl0bGV9XCIsIHN1Z2dlc3QgMSB0byAzIHN1aXRhYmxlIHN1Yi1nZW5yZXMvdGhlbWVzIHNlcGFyYXRlZCBieSBjb21tYXMuIExhbmd1YWdlOiBQb3J0dWd1ZXNlLiBSZXR1cm4gT05MWSB0aGUgZ2VucmVzLmBcbiAgICAgICAgOiBgU3VnZ2VzdCBhIGNyZWF0aXZlIFJQRyBzdWItZ2VucmUgYmFzZWQgb24gJ0RhcmsgRmFudGFzeScgYnV0IG1ha2UgaXQgdW5pcXVlIChtYXggNCB3b3JkcykuIFJldHVybiBPTkxZIHRoZSBnZW5yZSBuYW1lLmA7XG4gICAgY2FzZSAnc3VnZ2VzdFdvcmxkSGlzdG9yeSc6XG4gICAgICByZXR1cm4gYENyZWF0ZSBhIHNob3J0LCBlbmdhZ2luZyBXb3JsZCBIaXN0b3J5IHByZW1pc2UgKG1heCAzIHNlbnRlbmNlcykgc3BlY2lmaWNhbGx5IGZvciBhIGNhbXBhaWduIHVzaW5nIHRoZSAnJHtwYXlsb2FkLnN5c3RlbX0nIHN5c3RlbSBpbiB0aGUgJyR7cGF5bG9hZC5nZW5yZX0nIGdlbnJlLiBFbnN1cmUgdGhlIHRvbmUgbWF0Y2hlcyB0aGUgc3lzdGVtIG1lY2hhbmljcy4gTGFuZ3VhZ2U6IFBvcnR1Z3Vlc2UuYDtcbiAgICBjYXNlICdzdWdnZXN0U3R5bGUnOlxuICAgICAgcmV0dXJuIGBCYXNlZCBvbiB0aGUgV29ybGQgSGlzdG9yeSBhbmQgR2VucmUgYmVsb3csIHN1Z2dlc3QgYSBjb25jaXNlICd2aXN1YWxfc3R5bGUnIGZvciBhbiBBSSBpbWFnZSBnZW5lcmF0b3IgKFN0YWJsZSBEaWZmdXNpb24vRmx1eCBzdHlsZSkuIEdlbnJlOiAke3BheWxvYWQuZ2VucmV9LiBTeXN0ZW06ICR7cGF5bG9hZC5zeXN0ZW19LiBXb3JsZCBIaXN0b3J5OiBcIiR7cGF5bG9hZC53b3JsZEhpc3Rvcnl9XCIuIFJlc3BvbnNlIE9OTFkgd2l0aCB0aGUgcHJvbXB0IHN0cmluZyAoZS5nLiwgXCJEYXJrIEZhbnRhc3ksIE9pbCBQYWludGluZywgR3JpdHR5LCBIaWdoIENvbnRyYXN0XCIpLmA7XG4gICAgY2FzZSAnc3VnZ2VzdENoYXJhY3Rlck5hbWUnOlxuICAgICAgcmV0dXJuIGBTdWdnZXN0IGEgY29vbCwgdW5pcXVlIGNoYXJhY3RlciBuYW1lIGZpdHRpbmcgZm9yIGEgJHtwYXlsb2FkLmdlbnJlfSBSUEcgc2V0dGluZyB1c2luZyB0aGUgJHtwYXlsb2FkLnN5c3RlbX0gc3lzdGVtLiBSZXR1cm4gT05MWSB0aGUgbmFtZS5gO1xuICAgIGNhc2UgJ3N1Z2dlc3RDaGFyYWN0ZXJBcHBlYXJhbmNlJzpcbiAgICAgIHJldHVybiBgRGVzY3JpYmUgdGhlIHBoeXNpY2FsIGFwcGVhcmFuY2Ugb2YgYSBSUEcgY2hhcmFjdGVyIG5hbWVkIFwiJHtwYXlsb2FkLm5hbWV9XCIgaW4gYSAke3BheWxvYWQuZ2VucmV9IHNldHRpbmcuIGNvbmNpc2UsIHZpc3VhbCwgbWF4IDIgc2VudGVuY2VzLiBMYW5ndWFnZTogUG9ydHVndWVzZS5gO1xuICAgIGNhc2UgJ3N1Z2dlc3RDaGFyYWN0ZXJCYWNrc3RvcnknOlxuICAgICAge1xuICAgICAgICBjb25zdCBhcHBlYXJhbmNlID0gKHBheWxvYWQuYXBwZWFyYW5jZSB8fCAnJykudG9TdHJpbmcoKS50cmltKCk7XG4gICAgICAgIGNvbnN0IHByb2Zlc3Npb24gPSAocGF5bG9hZC5wcm9mZXNzaW9uIHx8ICcnKS50b1N0cmluZygpLnRyaW0oKTtcbiAgICAgICAgY29uc3QgYXBwZWFyYW5jZUhpbnQgPSBhcHBlYXJhbmNlID8gYEFwcGVhcmFuY2U6ICR7YXBwZWFyYW5jZX0uIGAgOiAnJztcbiAgICAgICAgY29uc3QgcHJvZmVzc2lvbkhpbnQgPSBwcm9mZXNzaW9uID8gYFByb2Zlc3Npb24vT2NjdXBhdGlvbjogJHtwcm9mZXNzaW9ufS4gYCA6ICcnO1xuICAgICAgICByZXR1cm4gYFdyaXRlIGEgc2hvcnQgYmFja3N0b3J5ICgzIHNlbnRlbmNlcykgZm9yIGEgY2hhcmFjdGVyIG5hbWVkICR7cGF5bG9hZC5uYW1lfS4gJHthcHBlYXJhbmNlSGludH0ke3Byb2Zlc3Npb25IaW50fVdvcmxkIENvbnRleHQ6ICR7cGF5bG9hZC53b3JsZEhpc3Rvcnl9LiBMYW5ndWFnZTogUG9ydHVndWVzZS5gO1xuICAgICAgfVxuICAgIGNhc2UgJ3N1Z2dlc3RDaGFyYWN0ZXJQcm9mZXNzaW9uJzpcbiAgICAgIHtcbiAgICAgICAgY29uc3QgYXBwZWFyYW5jZSA9IChwYXlsb2FkLmFwcGVhcmFuY2UgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpO1xuICAgICAgICBjb25zdCBiYWNrc3RvcnkgPSAocGF5bG9hZC5iYWNrc3RvcnkgfHwgJycpLnRvU3RyaW5nKCkudHJpbSgpO1xuICAgICAgICBjb25zdCBoaW50cyA9IFtcbiAgICAgICAgICBhcHBlYXJhbmNlID8gYEFwYXLDqm5jaWE6ICR7YXBwZWFyYW5jZX1gIDogJycsXG4gICAgICAgICAgYmFja3N0b3J5ID8gYEJhY2tncm91bmQ6ICR7YmFja3N0b3J5fWAgOiAnJyxcbiAgICAgICAgXS5maWx0ZXIoQm9vbGVhbikuam9pbignIHwgJyk7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IGhpbnRzID8gYCR7aGludHN9LiBgIDogJyc7XG4gICAgICAgIHJldHVybiBgU3VnaXJhIHVtYSBwcm9maXNzw6NvL29jdXBhw6fDo28gY3VydGEgKDEgYSAzIHBhbGF2cmFzKSBwYXJhIG8gcGVyc29uYWdlbS4gJHtwcmVmaXh9UmV0b3JuZSBBUEVOQVMgYSBwcm9maXNzw6NvL29jdXBhw6fDo28uYDtcbiAgICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgY29uc3QgcGFyc2VkID0gYm9keVNjaGVtYS5zYWZlUGFyc2UoanNvbik7XG4gICAgaWYgKCFwYXJzZWQuc3VjY2Vzcykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHBheWxvYWQnIH0sIHsgc3RhdHVzOiA0MDAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0ID0gYnVpbGRQcm9tcHQocGFyc2VkLmRhdGEudHlwZSwgcGFyc2VkLmRhdGEucGF5bG9hZCB8fCB7fSk7XG4gICAgaWYgKCFwcm9tcHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW52YWxpZCB0eXBlJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXJLZXkgPSByZXEuaGVhZGVycy5nZXQoJ3gtY3VzdG9tLWFwaS1rZXknKSB8fCB1bmRlZmluZWQ7XG5cbiAgICBjb25zdCBpcCA9IChyZXEuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8ICd1bmtub3duJykuc3BsaXQoJywnKVswXS50cmltKCk7XG4gICAgY29uc3QgcmF0ZUtleSA9IGBzdWdnZXN0OiR7aXB9YDtcbiAgICBpZiAoYXdhaXQgaXNSYXRlTGltaXRlZChyYXRlS2V5KSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdSYXRlIGxpbWl0IGV4Y2VlZGVkJyB9LCB7IHN0YXR1czogNDI5IH0pO1xuICAgIH1cbiAgICBsZXQgYXBpS2V5OiBzdHJpbmc7XG4gICAgdHJ5IHtcbiAgICAgIGFwaUtleSA9IHBpY2tBcGlLZXkodXNlcktleSk7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01pc3NpbmcgQVBJIGtleScgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG4gICAgY29uc3QgYWkgPSBuZXcgR3JvcSh7IGFwaUtleSB9KTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB3aXRoTW9kZWxGYWxsYmFjayhcbiAgICAgIChtb2RlbCkgPT5cbiAgICAgICAgYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxuICAgICAgICB9KSxcbiAgICAgIHsga2V5OiBgc3VnZ2VzdDoke3BhcnNlZC5kYXRhLnR5cGV9YCB9XG4gICAgKTtcblxuICAgIGNvbnN0IHRleHQgPSByZXN1bHQuY2hvaWNlcz8uWzBdPy5tZXNzYWdlPy5jb250ZW50IHx8ICcnO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHRleHQgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignU3VnZ2VzdCBBUEkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnU2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiR3JvcSIsInoiLCJwaWNrQXBpS2V5IiwiaXNSYXRlTGltaXRlZCIsIndpdGhNb2RlbEZhbGxiYWNrIiwiYm9keVNjaGVtYSIsIm9iamVjdCIsInR5cGUiLCJzdHJpbmciLCJwYXlsb2FkIiwicmVjb3JkIiwiYW55Iiwib3B0aW9uYWwiLCJidWlsZFByb21wdCIsInN5c3RlbSIsInRpdGxlIiwibGVuZ3RoIiwiZ2VucmUiLCJ3b3JsZEhpc3RvcnkiLCJuYW1lIiwiYXBwZWFyYW5jZSIsInRvU3RyaW5nIiwidHJpbSIsInByb2Zlc3Npb24iLCJhcHBlYXJhbmNlSGludCIsInByb2Zlc3Npb25IaW50IiwiYmFja3N0b3J5IiwiaGludHMiLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiIsInByZWZpeCIsIlBPU1QiLCJyZXEiLCJqc29uIiwicGFyc2VkIiwic2FmZVBhcnNlIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwicHJvbXB0IiwiZGF0YSIsInVzZXJLZXkiLCJoZWFkZXJzIiwiZ2V0IiwidW5kZWZpbmVkIiwiaXAiLCJzcGxpdCIsInJhdGVLZXkiLCJhcGlLZXkiLCJhaSIsInJlc3VsdCIsIm1vZGVsIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwia2V5IiwidGV4dCIsImNob2ljZXMiLCJtZXNzYWdlIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/suggest/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/keyPool.ts":
/*!***************************!*\
  !*** ./lib/ai/keyPool.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pickApiKey: () => (/* binding */ pickApiKey)\n/* harmony export */ });\nfunction pickApiKey(userKey) {\n    if (userKey && userKey.trim().length > 0) return userKey.trim();\n    throw new Error(\"Missing BYOK header\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWkva2V5UG9vbC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EsV0FBV0MsT0FBZ0I7SUFDekMsSUFBSUEsV0FBV0EsUUFBUUMsSUFBSSxHQUFHQyxNQUFNLEdBQUcsR0FBRyxPQUFPRixRQUFRQyxJQUFJO0lBQzdELE1BQU0sSUFBSUUsTUFBTTtBQUNsQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RyYWktLS12aXJ0dWFsLXRhYmxldG9wLy4vbGliL2FpL2tleVBvb2wudHM/NjQ0MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcGlja0FwaUtleSh1c2VyS2V5Pzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKHVzZXJLZXkgJiYgdXNlcktleS50cmltKCkubGVuZ3RoID4gMCkgcmV0dXJuIHVzZXJLZXkudHJpbSgpO1xuICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgQllPSyBoZWFkZXInKTtcbn1cbiJdLCJuYW1lcyI6WyJwaWNrQXBpS2V5IiwidXNlcktleSIsInRyaW0iLCJsZW5ndGgiLCJFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/keyPool.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/modelPool.ts":
/*!*****************************!*\
  !*** ./lib/ai/modelPool.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MODELS: () => (/* binding */ MODELS),\n/* harmony export */   withModelFallback: () => (/* binding */ withModelFallback)\n/* harmony export */ });\nconst MODELS = [\n    // TENTATIVA 1: O Melhor (Llama 3.3 70B)\n    \"llama-3.3-70b-versatile\",\n    // TENTATIVA 2: O Lógico (Qwen 2.5 72B) - Caso o Llama esteja com fila\n    \"qwen-2.5-72b-instruct\",\n    // TENTATIVA 3: O \"Tanque de Guerra\" (Llama 3.1 8B) - Caso você estoure o limite diário\n    \"llama-3.1-8b-instant\"\n];\nconst delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\nconst modelIndexByKey = new Map();\nfunction clampIndex(index) {\n    if (index < 0) return 0;\n    if (index >= MODELS.length) return MODELS.length - 1;\n    return index;\n}\nasync function withModelFallback(handler, options) {\n    let lastError;\n    const wait = Math.max(0, options?.minDelayMs ?? 0);\n    const startIndex = options?.key ? clampIndex(modelIndexByKey.get(options.key) ?? 0) : 0;\n    for(let i = startIndex; i < MODELS.length; i += 1){\n        const model = MODELS[i];\n        try {\n            if (wait > 0 && i > startIndex) {\n                await delay(wait * (i - startIndex));\n            }\n            const result = await handler(model);\n            if (options?.key) {\n                modelIndexByKey.set(options.key, i);\n            }\n            return result;\n        } catch (error) {\n            const status = error?.status || error?.code;\n            if (status === 429) {\n                throw error;\n            }\n            lastError = error;\n        }\n    }\n    if (options?.key) {\n        modelIndexByKey.set(options.key, 0);\n    }\n    throw lastError ?? new Error(\"All models failed\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWkvbW9kZWxQb29sLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sTUFBTUEsU0FBUztJQUNwQix3Q0FBd0M7SUFDeEM7SUFFQSxzRUFBc0U7SUFDdEU7SUFFQSx1RkFBdUY7SUFDdkY7Q0FDRCxDQUFDO0FBRUYsTUFBTUMsUUFBUSxDQUFDQyxLQUFlLElBQUlDLFFBQVEsQ0FBQ0MsVUFBWUMsV0FBV0QsU0FBU0Y7QUFFM0UsTUFBTUksa0JBQWtCLElBQUlDO0FBRTVCLFNBQVNDLFdBQVdDLEtBQWE7SUFDL0IsSUFBSUEsUUFBUSxHQUFHLE9BQU87SUFDdEIsSUFBSUEsU0FBU1QsT0FBT1UsTUFBTSxFQUFFLE9BQU9WLE9BQU9VLE1BQU0sR0FBRztJQUNuRCxPQUFPRDtBQUNUO0FBRU8sZUFBZUUsa0JBQ3BCQyxPQUFzQyxFQUN0Q0MsT0FBK0M7SUFFL0MsSUFBSUM7SUFDSixNQUFNQyxPQUFPQyxLQUFLQyxHQUFHLENBQUMsR0FBR0osU0FBU0ssY0FBYztJQUNoRCxNQUFNQyxhQUFhTixTQUFTTyxNQUN4QlosV0FBV0YsZ0JBQWdCZSxHQUFHLENBQUNSLFFBQVFPLEdBQUcsS0FBSyxLQUMvQztJQUVKLElBQUssSUFBSUUsSUFBSUgsWUFBWUcsSUFBSXRCLE9BQU9VLE1BQU0sRUFBRVksS0FBSyxFQUFHO1FBQ2xELE1BQU1DLFFBQVF2QixNQUFNLENBQUNzQixFQUFFO1FBQ3ZCLElBQUk7WUFDRixJQUFJUCxPQUFPLEtBQUtPLElBQUlILFlBQVk7Z0JBQzlCLE1BQU1sQixNQUFNYyxPQUFRTyxDQUFBQSxJQUFJSCxVQUFTO1lBQ25DO1lBQ0EsTUFBTUssU0FBUyxNQUFNWixRQUFRVztZQUM3QixJQUFJVixTQUFTTyxLQUFLO2dCQUNoQmQsZ0JBQWdCbUIsR0FBRyxDQUFDWixRQUFRTyxHQUFHLEVBQUVFO1lBQ25DO1lBQ0EsT0FBT0U7UUFDVCxFQUFFLE9BQU9FLE9BQU87WUFDZCxNQUFNQyxTQUFTLE9BQWdCQSxVQUFXRCxPQUFlRTtZQUN6RCxJQUFJRCxXQUFXLEtBQUs7Z0JBQ2xCLE1BQU1EO1lBQ1I7WUFDQVosWUFBWVk7UUFDZDtJQUNGO0lBRUEsSUFBSWIsU0FBU08sS0FBSztRQUNoQmQsZ0JBQWdCbUIsR0FBRyxDQUFDWixRQUFRTyxHQUFHLEVBQUU7SUFDbkM7SUFFQSxNQUFNTixhQUFhLElBQUllLE1BQU07QUFDL0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0cmFpLS0tdmlydHVhbC10YWJsZXRvcC8uL2xpYi9haS9tb2RlbFBvb2wudHM/MTZkNiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgTU9ERUxTID0gW1xuICAvLyBURU5UQVRJVkEgMTogTyBNZWxob3IgKExsYW1hIDMuMyA3MEIpXG4gICdsbGFtYS0zLjMtNzBiLXZlcnNhdGlsZScsXG5cbiAgLy8gVEVOVEFUSVZBIDI6IE8gTMOzZ2ljbyAoUXdlbiAyLjUgNzJCKSAtIENhc28gbyBMbGFtYSBlc3RlamEgY29tIGZpbGFcbiAgJ3F3ZW4tMi41LTcyYi1pbnN0cnVjdCcsXG5cbiAgLy8gVEVOVEFUSVZBIDM6IE8gXCJUYW5xdWUgZGUgR3VlcnJhXCIgKExsYW1hIDMuMSA4QikgLSBDYXNvIHZvY8OqIGVzdG91cmUgbyBsaW1pdGUgZGnDoXJpb1xuICAnbGxhbWEtMy4xLThiLWluc3RhbnQnLFxuXTtcblxuY29uc3QgZGVsYXkgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgbW9kZWxJbmRleEJ5S2V5ID0gbmV3IE1hcDxzdHJpbmcsIG51bWJlcj4oKTtcblxuZnVuY3Rpb24gY2xhbXBJbmRleChpbmRleDogbnVtYmVyKSB7XG4gIGlmIChpbmRleCA8IDApIHJldHVybiAwO1xuICBpZiAoaW5kZXggPj0gTU9ERUxTLmxlbmd0aCkgcmV0dXJuIE1PREVMUy5sZW5ndGggLSAxO1xuICByZXR1cm4gaW5kZXg7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3aXRoTW9kZWxGYWxsYmFjazxUPihcbiAgaGFuZGxlcjogKG1vZGVsOiBzdHJpbmcpID0+IFByb21pc2U8VD4sXG4gIG9wdGlvbnM/OiB7IG1pbkRlbGF5TXM/OiBudW1iZXI7IGtleT86IHN0cmluZyB9XG4pOiBQcm9taXNlPFQ+IHtcbiAgbGV0IGxhc3RFcnJvcjogdW5rbm93bjtcbiAgY29uc3Qgd2FpdCA9IE1hdGgubWF4KDAsIG9wdGlvbnM/Lm1pbkRlbGF5TXMgPz8gMCk7XG4gIGNvbnN0IHN0YXJ0SW5kZXggPSBvcHRpb25zPy5rZXlcbiAgICA/IGNsYW1wSW5kZXgobW9kZWxJbmRleEJ5S2V5LmdldChvcHRpb25zLmtleSkgPz8gMClcbiAgICA6IDA7XG5cbiAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCBNT0RFTFMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBtb2RlbCA9IE1PREVMU1tpXTtcbiAgICB0cnkge1xuICAgICAgaWYgKHdhaXQgPiAwICYmIGkgPiBzdGFydEluZGV4KSB7XG4gICAgICAgIGF3YWl0IGRlbGF5KHdhaXQgKiAoaSAtIHN0YXJ0SW5kZXgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGhhbmRsZXIobW9kZWwpO1xuICAgICAgaWYgKG9wdGlvbnM/LmtleSkge1xuICAgICAgICBtb2RlbEluZGV4QnlLZXkuc2V0KG9wdGlvbnMua2V5LCBpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IChlcnJvciBhcyBhbnkpPy5zdGF0dXMgfHwgKGVycm9yIGFzIGFueSk/LmNvZGU7XG4gICAgICBpZiAoc3RhdHVzID09PSA0MjkpIHtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9XG4gICAgICBsYXN0RXJyb3IgPSBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBpZiAob3B0aW9ucz8ua2V5KSB7XG4gICAgbW9kZWxJbmRleEJ5S2V5LnNldChvcHRpb25zLmtleSwgMCk7XG4gIH1cblxuICB0aHJvdyBsYXN0RXJyb3IgPz8gbmV3IEVycm9yKCdBbGwgbW9kZWxzIGZhaWxlZCcpO1xufVxuIl0sIm5hbWVzIjpbIk1PREVMUyIsImRlbGF5IiwibXMiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJtb2RlbEluZGV4QnlLZXkiLCJNYXAiLCJjbGFtcEluZGV4IiwiaW5kZXgiLCJsZW5ndGgiLCJ3aXRoTW9kZWxGYWxsYmFjayIsImhhbmRsZXIiLCJvcHRpb25zIiwibGFzdEVycm9yIiwid2FpdCIsIk1hdGgiLCJtYXgiLCJtaW5EZWxheU1zIiwic3RhcnRJbmRleCIsImtleSIsImdldCIsImkiLCJtb2RlbCIsInJlc3VsdCIsInNldCIsImVycm9yIiwic3RhdHVzIiwiY29kZSIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/modelPool.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai/rateLimit.ts":
/*!*****************************!*\
  !*** ./lib/ai/rateLimit.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isRateLimited: () => (/* binding */ isRateLimited)\n/* harmony export */ });\n/* harmony import */ var _supabase_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../supabase/server */ \"(rsc)/./lib/supabase/server.ts\");\n\nconst RATE_LIMIT_WINDOW_MS = 60000;\nconst RATE_LIMIT_WINDOW_SEC = 60;\nconst RATE_LIMIT_MAX = 20;\nconst rateLimitStore = new Map();\nfunction isRateLimitedInMemory(key) {\n    const now = Date.now();\n    const windowStart = now - RATE_LIMIT_WINDOW_MS;\n    const timestamps = rateLimitStore.get(key)?.filter((t)=>t >= windowStart) || [];\n    if (timestamps.length >= RATE_LIMIT_MAX) {\n        rateLimitStore.set(key, timestamps);\n        return true;\n    }\n    timestamps.push(now);\n    rateLimitStore.set(key, timestamps);\n    return false;\n}\nasync function isRateLimited(key) {\n    const admin = (0,_supabase_server__WEBPACK_IMPORTED_MODULE_0__.createAdminClient)();\n    if (!admin) {\n        return isRateLimitedInMemory(key);\n    }\n    const { data, error } = await admin.rpc(\"check_rate_limit\", {\n        p_key: key,\n        p_limit: RATE_LIMIT_MAX,\n        p_window_seconds: RATE_LIMIT_WINDOW_SEC\n    });\n    if (error) {\n        return isRateLimitedInMemory(key);\n    }\n    return Boolean(data);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWkvcmF0ZUxpbWl0LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVEO0FBRXZELE1BQU1DLHVCQUF1QjtBQUM3QixNQUFNQyx3QkFBd0I7QUFDOUIsTUFBTUMsaUJBQWlCO0FBQ3ZCLE1BQU1DLGlCQUFpQixJQUFJQztBQUUzQixTQUFTQyxzQkFBc0JDLEdBQVc7SUFDeEMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixNQUFNRSxjQUFjRixNQUFNUDtJQUMxQixNQUFNVSxhQUFhUCxlQUFlUSxHQUFHLENBQUNMLE1BQU1NLE9BQU8sQ0FBQ0MsSUFBTUEsS0FBS0osZ0JBQWdCLEVBQUU7SUFFakYsSUFBSUMsV0FBV0ksTUFBTSxJQUFJWixnQkFBZ0I7UUFDdkNDLGVBQWVZLEdBQUcsQ0FBQ1QsS0FBS0k7UUFDeEIsT0FBTztJQUNUO0lBRUFBLFdBQVdNLElBQUksQ0FBQ1Q7SUFDaEJKLGVBQWVZLEdBQUcsQ0FBQ1QsS0FBS0k7SUFDeEIsT0FBTztBQUNUO0FBRU8sZUFBZU8sY0FBY1gsR0FBVztJQUM3QyxNQUFNWSxRQUFRbkIsbUVBQWlCQTtJQUMvQixJQUFJLENBQUNtQixPQUFPO1FBQ1YsT0FBT2Isc0JBQXNCQztJQUMvQjtJQUVBLE1BQU0sRUFBRWEsSUFBSSxFQUFFQyxLQUFLLEVBQUUsR0FBRyxNQUFNRixNQUFNRyxHQUFHLENBQUMsb0JBQW9CO1FBQzFEQyxPQUFPaEI7UUFDUGlCLFNBQVNyQjtRQUNUc0Isa0JBQWtCdkI7SUFDcEI7SUFFQSxJQUFJbUIsT0FBTztRQUNULE9BQU9mLHNCQUFzQkM7SUFDL0I7SUFFQSxPQUFPbUIsUUFBUU47QUFDakIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0cmFpLS0tdmlydHVhbC10YWJsZXRvcC8uL2xpYi9haS9yYXRlTGltaXQudHM/YmI2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVBZG1pbkNsaWVudCB9IGZyb20gJy4uL3N1cGFiYXNlL3NlcnZlcic7XG5cbmNvbnN0IFJBVEVfTElNSVRfV0lORE9XX01TID0gNjBfMDAwO1xuY29uc3QgUkFURV9MSU1JVF9XSU5ET1dfU0VDID0gNjA7XG5jb25zdCBSQVRFX0xJTUlUX01BWCA9IDIwO1xuY29uc3QgcmF0ZUxpbWl0U3RvcmUgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyW10+KCk7XG5cbmZ1bmN0aW9uIGlzUmF0ZUxpbWl0ZWRJbk1lbW9yeShrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIFJBVEVfTElNSVRfV0lORE9XX01TO1xuICBjb25zdCB0aW1lc3RhbXBzID0gcmF0ZUxpbWl0U3RvcmUuZ2V0KGtleSk/LmZpbHRlcigodCkgPT4gdCA+PSB3aW5kb3dTdGFydCkgfHwgW107XG5cbiAgaWYgKHRpbWVzdGFtcHMubGVuZ3RoID49IFJBVEVfTElNSVRfTUFYKSB7XG4gICAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgdGltZXN0YW1wcyk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB0aW1lc3RhbXBzLnB1c2gobm93KTtcbiAgcmF0ZUxpbWl0U3RvcmUuc2V0KGtleSwgdGltZXN0YW1wcyk7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzUmF0ZUxpbWl0ZWQoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgYWRtaW4gPSBjcmVhdGVBZG1pbkNsaWVudCgpO1xuICBpZiAoIWFkbWluKSB7XG4gICAgcmV0dXJuIGlzUmF0ZUxpbWl0ZWRJbk1lbW9yeShrZXkpO1xuICB9XG5cbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgYWRtaW4ucnBjKCdjaGVja19yYXRlX2xpbWl0Jywge1xuICAgIHBfa2V5OiBrZXksXG4gICAgcF9saW1pdDogUkFURV9MSU1JVF9NQVgsXG4gICAgcF93aW5kb3dfc2Vjb25kczogUkFURV9MSU1JVF9XSU5ET1dfU0VDLFxuICB9KTtcblxuICBpZiAoZXJyb3IpIHtcbiAgICByZXR1cm4gaXNSYXRlTGltaXRlZEluTWVtb3J5KGtleSk7XG4gIH1cblxuICByZXR1cm4gQm9vbGVhbihkYXRhKTtcbn0iXSwibmFtZXMiOlsiY3JlYXRlQWRtaW5DbGllbnQiLCJSQVRFX0xJTUlUX1dJTkRPV19NUyIsIlJBVEVfTElNSVRfV0lORE9XX1NFQyIsIlJBVEVfTElNSVRfTUFYIiwicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJpc1JhdGVMaW1pdGVkSW5NZW1vcnkiLCJrZXkiLCJub3ciLCJEYXRlIiwid2luZG93U3RhcnQiLCJ0aW1lc3RhbXBzIiwiZ2V0IiwiZmlsdGVyIiwidCIsImxlbmd0aCIsInNldCIsInB1c2giLCJpc1JhdGVMaW1pdGVkIiwiYWRtaW4iLCJkYXRhIiwiZXJyb3IiLCJycGMiLCJwX2tleSIsInBfbGltaXQiLCJwX3dpbmRvd19zZWNvbmRzIiwiQm9vbGVhbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai/rateLimit.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase/server.ts":
/*!********************************!*\
  !*** ./lib/supabase/server.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAdminClient: () => (/* binding */ createAdminClient),\n/* harmony export */   createServerClient: () => (/* binding */ createServerClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst SUPABASE_URL = \"https://uhfqpdcylnhqmbhqzfqp.supabase.co\";\nconst SUPABASE_ANON_KEY = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVoZnFwZGN5bG5ocW1iaHF6ZnFwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwNTg0OTcsImV4cCI6MjA4NTYzNDQ5N30.bsnJbhS4hS8JNxU4JIyIX4AWpm-rrmmK2KAWaPgGzm0\";\nconst SUPABASE_SERVICE_ROLE_KEY = process.env.SUPABASE_SERVICE_ROLE_KEY;\nif (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\n    throw new Error(\"Missing Supabase env vars\");\n}\nfunction createServerClient(accessToken) {\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_ANON_KEY, {\n        global: {\n            headers: accessToken ? {\n                Authorization: `Bearer ${accessToken}`\n            } : {}\n        }\n    });\n}\nfunction createAdminClient() {\n    if (!SUPABASE_SERVICE_ROLE_KEY) return null;\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY, {\n        auth: {\n            persistSession: false\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxRDtBQUVyRCxNQUFNQyxlQUFlQywwQ0FBb0M7QUFDekQsTUFBTUcsb0JBQW9CSCxrTkFBeUM7QUFDbkUsTUFBTUssNEJBQTRCTCxRQUFRQyxHQUFHLENBQUNJLHlCQUF5QjtBQUV2RSxJQUFJLENBQUNOLGdCQUFnQixDQUFDSSxtQkFBbUI7SUFDdkMsTUFBTSxJQUFJRyxNQUFNO0FBQ2xCO0FBRU8sU0FBU0MsbUJBQW1CQyxXQUFvQjtJQUNyRCxPQUFPVixtRUFBWUEsQ0FBQ0MsY0FBY0ksbUJBQW1CO1FBQ25ETSxRQUFRO1lBQ05DLFNBQVNGLGNBQWM7Z0JBQUVHLGVBQWUsQ0FBQyxPQUFPLEVBQUVILFlBQVksQ0FBQztZQUFDLElBQUksQ0FBQztRQUN2RTtJQUNGO0FBQ0Y7QUFFTyxTQUFTSTtJQUNkLElBQUksQ0FBQ1AsMkJBQTJCLE9BQU87SUFDdkMsT0FBT1AsbUVBQVlBLENBQUNDLGNBQWNNLDJCQUEyQjtRQUMzRFEsTUFBTTtZQUFFQyxnQkFBZ0I7UUFBTTtJQUNoQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdHJhaS0tLXZpcnR1YWwtdGFibGV0b3AvLi9saWIvc3VwYWJhc2Uvc2VydmVyLnRzPzY2MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuY29uc3QgU1VQQUJBU0VfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIGFzIHN0cmluZztcbmNvbnN0IFNVUEFCQVNFX0FOT05fS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgYXMgc3RyaW5nO1xuY29uc3QgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG5pZiAoIVNVUEFCQVNFX1VSTCB8fCAhU1VQQUJBU0VfQU5PTl9LRVkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudiB2YXJzJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXJDbGllbnQoYWNjZXNzVG9rZW4/OiBzdHJpbmcpIHtcbiAgcmV0dXJuIGNyZWF0ZUNsaWVudChTVVBBQkFTRV9VUkwsIFNVUEFCQVNFX0FOT05fS0VZLCB7XG4gICAgZ2xvYmFsOiB7XG4gICAgICBoZWFkZXJzOiBhY2Nlc3NUb2tlbiA/IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2FjY2Vzc1Rva2VufWAgfSA6IHt9LFxuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWRtaW5DbGllbnQoKSB7XG4gIGlmICghU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSkgcmV0dXJuIG51bGw7XG4gIHJldHVybiBjcmVhdGVDbGllbnQoU1VQQUJBU0VfVVJMLCBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZLCB7XG4gICAgYXV0aDogeyBwZXJzaXN0U2Vzc2lvbjogZmFsc2UgfSxcbiAgfSk7XG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsIlNVUEFCQVNFX1VSTCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9BTk9OX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIkVycm9yIiwiY3JlYXRlU2VydmVyQ2xpZW50IiwiYWNjZXNzVG9rZW4iLCJnbG9iYWwiLCJoZWFkZXJzIiwiQXV0aG9yaXphdGlvbiIsImNyZWF0ZUFkbWluQ2xpZW50IiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase/server.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions","vendor-chunks/formdata-node","vendor-chunks/ms","vendor-chunks/zod","vendor-chunks/groq-sdk","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/abort-controller","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsuggest%2Froute&page=%2Fapi%2Fsuggest%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsuggest%2Froute.ts&appDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fjr%2FProjetos%2FMestrAi&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();